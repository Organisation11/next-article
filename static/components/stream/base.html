<link rel="StyleSheet" href="/components/stream/style.css"/>

{% if title %}
<h1 class="stream-list__title">
    {{ title }} 
</h1>
{% endif %}

{% for article in stream %}
    {% if article.raw %}

        <div class="article-card" id="capi-{{ article.id }}">

            <a href="/search?q=genre:{{ article.genre }}">{{ article.genre }}</a> 
            / 
            <a href="/search?q={{ article.primarySection.taxonomy }}:{{ article.primarySection.name }}">{{ article.primarySection.name }}</a> 

            <!--
                {{ article.primarySection.name }}
                {{ article.primaryTheme.name }}
            -->

            <a href="/{{ article.id }}">
                <img src="{{ article.largestImage.url }}" class="article-card__image article-card__image-{{ article.id }}" draggable="true"/>
            </a>
            
            <h3 class="article-card__headline">
                <a href="/{{ article.id }}" class="article-card__link">
                    {{ article.raw.item.title.title }}
                </a>
            </h3>

            <p align="center">
            <em>
                {{ article.lastUpdated|date('l, j F, Y') }} -
                {% for author in article.authors %}
                    <a href="/search?q={{ author.searchString }}">{{ author.name }}</a>{% if !loop.last %}, {% endif %}
                {% endfor %}
            </em>
            </p>

            <p align="center">
                <em><small>{{ article.wordCount }} words - {{ article.readingTime }} minutes | 705 comments</small></em>
            </p>
            
            <p align="center">
                <small> 
                    {% for person in article.people %}
                        <a href="/search?q={{ person.searchString }}">{{ person.name }}</a>{% if !loop.last %}, {% endif %}
                        {% endfor %}
                </small>
            </p>
            
            <p align="center">
                <small>
                    {% for org in article.organisations %}
                        <a href="/search?q={{ org.searchString }}">{{ org.name }}</a>{% if !loop.last %}, {% endif %}
                    {% endfor %}
                </small>
            </p>

            <p>
                {{ article.paragraphs(0, 2) }}
            </p>

            {% if mode === 'compact' %}
           
                <div class="article-card__more js-toggle" data-toggle=".more-{{ article.id }}">Open</div>
                <section class="js-hide more-{{ article.id }}">
                    {{ article.paragraphs(3, 100) }}
                </section>
            
            {% else %}

                {{ article.paragraphs(3, 100) }}
            
            {% endif %}

        </div>
    
    {% endif %}
{% endfor %}

<script src="/trackable/lib/trackable.js"></script>
<script src="/components/stream/main.js"></script>

